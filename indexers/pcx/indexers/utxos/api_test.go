package utxos

import (
	"testing"
)

func TestAppendChecksum(t *testing.T) {
	testCases := []struct {
		name     string
		input    string
		expected string
	}{
		{
			name:     "UTXO 1",
			input:    "0x000080f322030a7e4096b447d33560bdecae9c98b43d7d0a553ac6f5b171804e38a5000000003d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa00000007000000001dcd650000000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44ded",
			expected: "0x000080f322030a7e4096b447d33560bdecae9c98b43d7d0a553ac6f5b171804e38a5000000003d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa00000007000000001dcd650000000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44ded780d390c",
		},
		{
			name:     "UTXO 2",
			input:    "0x00001195f752278519d3eeaa5da2b536966a61f51f5cef2dbfb7b855cbc354735a0a000000003d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa000000070000000017d5f47300000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44ded",
			expected: "0x00001195f752278519d3eeaa5da2b536966a61f51f5cef2dbfb7b855cbc354735a0a000000003d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa000000070000000017d5f47300000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44ded67bd6070",
		},
		{
			name:     "UTXO 3 (staked)",
			input:    "0x00001195f752278519d3eeaa5da2b536966a61f51f5cef2dbfb7b855cbc354735a0a000000013d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa00000007000000003b9aca0000000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44ded",
			expected: "0x00001195f752278519d3eeaa5da2b536966a61f51f5cef2dbfb7b855cbc354735a0a000000013d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa00000007000000003b9aca0000000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44ded060b1866",
		},
		{
			name:     "UTXO 4",
			input:    "0x000050d4e256d48fcd5ec811ba4b29922cc6d8ea234ba3b24660ca0fab6558faca77000000003d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa00000007000000005370f3ee00000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44ded",
			expected: "0x000050d4e256d48fcd5ec811ba4b29922cc6d8ea234ba3b24660ca0fab6558faca77000000003d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa00000007000000005370f3ee00000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44dedda8d563a",
		},
		{
			name:     "UTXO 5",
			input:    "0x00005dcd0134921ce44d853b8285647adf547af3997879b5a63426ca3f281dc01669000000003d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa000000070000000059671d4200000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44ded",
			expected: "0x00005dcd0134921ce44d853b8285647adf547af3997879b5a63426ca3f281dc01669000000003d9bdac0ed1d761330cf680efdeb1a42159eb387d6d2950c96f7d28f61bbe2aa000000070000000059671d4200000000000000000000000100000001e34206c069a5c8d5fcba6f81932196660eb44ded51958731",
		},
	}

	for _, tc := range testCases {
		t.Run(tc.name, func(t *testing.T) {
			result, err := appendChecksum(tc.input)
			if err != nil {
				t.Fatalf("appendChecksum(%s) returned error: %v", tc.name, err)
			}
			if result != tc.expected {
				t.Errorf("appendChecksum(%s)\nGot:      %s\nExpected: %s", tc.name, result, tc.expected)
			}
		})
	}
}

